<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/screen/window.xsd"
        xmlns:chart="http://schemas.haulmont.com/charts/charts.xsd"
        xmlns:c="http://schemas.haulmont.com/cuba/screen/jpql_condition.xsd"
        xmlns:charts="http://schemas.haulmont.com/charts/charts.xsd"

        caption="msg://newScreen.caption"
        messagesPack="com.company.truonghoc.web.screens.baocao">
    <data>
        <collection id="donvisDc"
                    class="com.company.truonghoc.entity.Donvi"
                    view="donvi-view">
            <loader id="donvisDl">
                <query>
                    <![CDATA[select e from truonghoc_Donvi e]]>
                </query>
            </loader>
        </collection>
        <collection id="hocphisDc"
                    class="com.company.truonghoc.entity.Hocphi"
                    view="hocphi-view">
            <loader id="hocphisDl">
                <query>
                    <![CDATA[select e from truonghoc_Hocphi e]]>
                    <condition>
                        <and>
                            <c:jpql>
                                <c:where>e.dovitao_hocphi = :component_dovitao_hocphiField</c:where>
                            </c:jpql>
                            <c:jpql>
                                <c:where>e.ngaydong >= :component_tungayField</c:where>
                            </c:jpql>
                            <c:jpql>
                                <c:where>:component_denngayField >= e.ngaydong</c:where>
                            </c:jpql>
                            <c:jpql>
                                <c:where>:component_trangthaiField = e.tinhtrangthanhtoan</c:where>
                            </c:jpql>
                        </and>
                    </condition>
                </query>
            </loader>
        </collection>
    </data>
    <facets>
        <dataLoadCoordinator auto="true">
        </dataLoadCoordinator>
    </facets>
    <layout>
        <vbox spacing="true"
              stylename="css-vbox-timkiem">
            <label value="Điều kiện lọc" stylename="dieukienloc"/>
            <hbox spacing="true"
                  stylename="hbox-text">
                <lookupField id="dovitao_hocphiField"
                             caption="Đơn vị"
                             nullName="Lọc tất cả"
                             stylename="nhap"/>
                <dateField id="tungayField"
                           datatype="date"
                           resolution="DAY"
                           width="100%"
                           caption="mainMsg://tungay"
                           stylename="nhap"/>
                <dateField id="denngayField"
                           datatype="date"
                           resolution="DAY"
                           caption="mainMsg://denngay"
                           stylename="nhap"/>
                <lookupField id="trangthaiField"
                             caption="Trạng thái"
                             nullName="Lọc tất cả"/>
            </hbox>
            <button id="clearBtn"
                    caption="Clear"
                    align="TOP_RIGHT"
                    stylename="button-clearbtn"/>
        </vbox>
        <groupTable id="hocphisTable"
                    width="100%"
                    dataContainer="hocphisDc" aggregatable="true">
            <columns>
                <group>
                    <column id="dovitao_hocphi"/>
                </group>
                <column id="hovaten"
                        caption="mainMsg://hocphi.hovaten"/>
                <column id="sotienthutheohd"
                        caption="mainMsg://hocphi.sotienthutheohd">
                    <aggregation type="SUM"/>
                </column>

            </columns>
            <rowsCount/>

        </groupTable>
        <textField id="hai" datatype="long"/>
<!--        <chart:pieChart id="donutChart"-->
<!--                        height="100%"-->
<!--                        innerRadius="60%"-->
<!--                        labelRadius="5"-->
<!--                        labelText="[[title]]"-->
<!--                        radius="42%"-->
<!--                        titleField="title"-->
<!--                        valueField="value"-->
<!--                        width="100%">-->
<!--            <chart:export/>-->
<!--        </chart:pieChart>-->


        <chart:serialChart id="column3d"
                           angle="30"
                           categoryField="tendonvi"
                           dataContainer="donvisDc"
                           depth3D="60"
                           height="100%"
                           plotAreaFillAlphas="0.1"
                           startDuration="1"
                           theme="LIGHT"
                           width="100%">
            <chart:categoryAxis gridPosition="START"/>
            <chart:graphs>
                <chart:graph
                             fillAlphas="0.9"
                             lineAlpha="0.2"
                             title="2014"
                             type="COLUMN"
                             valueField="thu"/>
<!--                <chart:graph-->
<!--                             fillAlphas="09."-->
<!--                             lineAlpha="0.2"-->
<!--                             title="2015"-->
<!--                             type="COLUMN"-->
<!--                             valueField="chi"/>-->
            </chart:graphs>
            <chart:export/>
        </chart:serialChart>
    </layout>
</window>